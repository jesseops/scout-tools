<!doctype html>
<html lang="en" data-org="pack">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Activity Timer</title>

  <link rel="stylesheet" href="../../assets/css/base.css" />
  <link rel="stylesheet" href="../../assets/css/theme-pack.css" data-theme-css="pack" disabled />
  <link rel="stylesheet" href="../../assets/css/theme-troop.css" data-theme-css="troop" disabled />
  <script src="../../assets/js/theme.js" defer></script>

  <style>
    .timer-card {
      text-align: center;
      padding: 24px;
    }

    .timer-display {
      font-size: clamp(48px, 8vw, 96px);
      font-weight: 800;
      letter-spacing: 2px;
    }

    .timer-status {
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--muted);
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin-top: 16px;
    }

    .preset-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .timer-input {
      max-width: 140px;
    }
  </style>
</head>
<body>
  <header class="header no-print">
    <div class="header-inner container">
      <div>
        <strong>Activity Timer</strong>
        <div class="muted">Big, simple timer for den & pack activities.</div>
      </div>
      <a class="button" href="../../">Back to tools</a>
    </div>
  </header>

  <main class="container stack" style="padding: 24px 16px 40px;">
    <section class="card timer-card">
      <div class="timer-status" id="status">Ready</div>
      <div class="timer-display" id="display">05:00</div>
      <p class="muted">Set minutes, then tap Start.</p>

      <div class="controls">
        <label class="timer-input">
          Minutes
          <input id="minutesInput" type="number" min="1" max="120" value="5" inputmode="numeric" />
        </label>
        <button class="primary" id="startBtn">Start</button>
        <button id="pauseBtn">Pause</button>
        <button id="resetBtn">Reset</button>
      </div>

      <div class="preset-row" aria-label="Preset timers">
        <button class="button" data-preset="2">2 min</button>
        <button class="button" data-preset="5">5 min</button>
        <button class="button" data-preset="10">10 min</button>
        <button class="button" data-preset="15">15 min</button>
      </div>
    </section>

    <section class="card stack">
      <h2>Tips</h2>
      <ul class="stack" style="gap: 8px; padding-left: 18px;">
        <li>Use preset buttons for quick den rotations.</li>
        <li>Tap Reset to return to the last set time.</li>
        <li>Works offline once opened.</li>
      </ul>
      <noscript>
        <p class="muted">JavaScript is required for the countdown. You can still use this page as a quick reference for time blocks.</p>
      </noscript>
    </section>
  </main>

<script>
(() => {
  const display = document.getElementById("display");
  const status = document.getElementById("status");
  const minutesInput = document.getElementById("minutesInput");
  const startBtn = document.getElementById("startBtn");
  const pauseBtn = document.getElementById("pauseBtn");
  const resetBtn = document.getElementById("resetBtn");
  const presetButtons = document.querySelectorAll("[data-preset]");

  let timerId = null;
  let remainingSeconds = Number(minutesInput.value) * 60;
  let baseSeconds = remainingSeconds;

  const formatTime = (totalSeconds) => {
    const mins = Math.floor(totalSeconds / 60);
    const secs = totalSeconds % 60;
    return `${String(mins).padStart(2, "0")}:${String(secs).padStart(2, "0")}`;
  };

  const updateDisplay = () => {
    display.textContent = formatTime(remainingSeconds);
  };

  const setStatus = (text) => {
    status.textContent = text;
  };

  const stopTimer = () => {
    if (timerId) {
      clearInterval(timerId);
      timerId = null;
    }
  };

  const tick = () => {
    if (remainingSeconds > 0) {
      remainingSeconds -= 1;
      updateDisplay();
      if (remainingSeconds === 0) {
        setStatus("Time!");
        stopTimer();
      }
    }
  };

  startBtn.addEventListener("click", () => {
    if (timerId) return;
    if (remainingSeconds === 0) {
      remainingSeconds = baseSeconds;
    }
    setStatus("Running");
    timerId = window.setInterval(tick, 1000);
  });

  pauseBtn.addEventListener("click", () => {
    stopTimer();
    setStatus("Paused");
  });

  resetBtn.addEventListener("click", () => {
    stopTimer();
    remainingSeconds = baseSeconds;
    updateDisplay();
    setStatus("Ready");
  });

  minutesInput.addEventListener("change", () => {
    const minutes = Math.max(1, Math.min(120, Number(minutesInput.value) || 1));
    minutesInput.value = minutes;
    baseSeconds = minutes * 60;
    remainingSeconds = baseSeconds;
    updateDisplay();
    setStatus("Ready");
  });

  presetButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const minutes = Number(btn.dataset.preset);
      minutesInput.value = minutes;
      baseSeconds = minutes * 60;
      remainingSeconds = baseSeconds;
      updateDisplay();
      setStatus("Ready");
    });
  });

  updateDisplay();
})();
</script>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("../../sw.js");
  }
</script>
</body>
</html>
