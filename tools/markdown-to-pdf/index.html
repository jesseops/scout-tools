<!doctype html>
<html lang="en" data-org="pack">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Markdown to PDF</title>

  <link rel="stylesheet" href="../../assets/css/base.css" />
  <link rel="stylesheet" href="../../assets/css/tool-activity-timer.css" />
  <link rel="stylesheet" href="../../assets/css/tool-markdown-to-pdf.css" />
  <link rel="stylesheet" href="../../assets/css/theme-pack.css" data-theme-css="pack" disabled />
  <link rel="stylesheet" href="../../assets/css/theme-troop.css" data-theme-css="troop" disabled />
  <script src="../../assets/js/theme.js"></script>
  <script src="../../assets/js/htmx.min.js"></script>
  <script src="../../assets/js/alpine.min.js" defer></script>
  <script src="../../assets/js/marked.min.js"></script>
  <script src="../../assets/js/tool-uniform-inspection-checklist.js"></script>
  <script src="../../assets/js/tool-markdown-to-pdf.js"></script>
  <script src="../../assets/js/layout.js"></script>

</head>
<body hx-boost="true" hx-target="#app-main" hx-select="#app-main" hx-swap="outerHTML" hx-push-url="true">
  <header class="header no-print">
    <div class="header-inner container">
      <div class="header-brand">
        <strong data-layout-title>Markdown to PDF</strong>
        <p class="muted header-title-subtitle" data-layout-subtitle>Create den meeting plans with clean printable output.</p>
      </div>
      <div class="header-actions">
        <button class="header-toggle" type="button" data-nav-toggle aria-expanded="false" aria-controls="headerPanel">
          <span class="header-toggle-icon" aria-hidden="true"></span>
          <span class="sr-only">Toggle header menu</span>
        </button>
        <div class="header-panel is-collapsed" id="headerPanel" data-nav-panel hidden>
          <div class="theme-controls" aria-label="Theme settings">
            <div class="theme-control field">
              <label for="orgSelect">Organization</label>
              <select id="orgSelect" data-theme-control="org">
                <option value="pack">Cub Scouts Pack</option>
                <option value="troop">Scouting America Troop</option>
              </select>
            </div>
          </div>
          <button class="button theme-toggle" type="button" data-theme-toggle aria-pressed="false">
            <span data-theme-toggle-label>Light</span>
          </button>
        </div>
      </div>
    </div>
    <nav class="breadcrumbs container" aria-label="Breadcrumb">
      <ol class="breadcrumb-list" data-layout-breadcrumbs></ol>
    </nav>
  </header>

  <main id="app-main" class="tool-shell stack" x-data="handoutApp()" data-page-title="Markdown to PDF" data-page-subtitle="Create den meeting plans with clean printable output." data-breadcrumbs='[{"label":"Home","href":"../../"},{"label":"Markdown to PDF","href":"./"}]'>
    <section class="card stack">
      <div class="top-grid">
        <div class="stack">
          <h1>Den Meeting Plan Builder</h1>
          <p class="muted">Write in Markdown, add optional branding, then export a PDF for parents, leaders, and den chiefs.</p>
        </div>
        <div class="stack">
          <div class="file-row">
            <label class="field">
              Header logo (optional)
              <input type="file" accept="image/*" @change="onLogoChange" />
            </label>
            <label class="field">
              Watermark (optional)
              <input type="file" accept="image/*" @change="onWatermarkChange" />
            </label>
          </div>
          <div class="actions">
            <button class="button primary" type="button" @click="downloadPdf">Download PDF</button>
            <button class="button" type="button" @click="resetAll">Reset</button>
          </div>
        </div>
      </div>
    </section>

    <section class="editor-grid">
      <label class="card stack">
        <div class="panel-title">
          <strong>Parent Handout</strong>
          <span class="panel-tag">PDF Page 1</span>
        </div>
        <textarea x-model="parentMarkdown"></textarea>
      </label>

      <label class="card stack">
        <div class="panel-title">
          <strong>Leader Notes</strong>
          <span class="panel-tag">PDF Page 2</span>
        </div>
        <textarea x-model="leaderMarkdown"></textarea>
      </label>

      <label class="card stack">
        <div class="panel-title">
          <strong>Den Chief Instructions</strong>
          <span class="panel-tag">PDF Page 3</span>
        </div>
        <textarea x-model="denChiefMarkdown"></textarea>
      </label>
    </section>

    <section class="preview-panel" id="print-root">
      <div class="pdf-page">
        <div class="pdf-header">
          <template x-if="logoDataUrl">
            <img class="pdf-logo" :src="logoDataUrl" alt="Header logo" />
          </template>
          <div>
            <h2 x-text="parentTitle"></h2>
            <p>Parent handout</p>
          </div>
        </div>
        <template x-if="watermarkDataUrl">
          <img class="watermark" :src="watermarkDataUrl" alt="Watermark" />
        </template>
        <div class="pdf-content">
          <div class="markdown" x-html="renderSections(parentMarkdown)"></div>
        </div>
      </div>

      <div class="pdf-page">
        <div class="pdf-header">
          <template x-if="logoDataUrl">
            <img class="pdf-logo" :src="logoDataUrl" alt="Header logo" />
          </template>
          <div>
            <h2 x-text="leaderTitle"></h2>
            <p>Leader notes</p>
          </div>
        </div>
        <template x-if="watermarkDataUrl">
          <img class="watermark" :src="watermarkDataUrl" alt="Watermark" />
        </template>
        <div class="pdf-content">
          <div class="markdown" x-html="renderSections(leaderMarkdown)"></div>
        </div>
      </div>

      <div class="pdf-page">
        <div class="pdf-header">
          <template x-if="logoDataUrl">
            <img class="pdf-logo" :src="logoDataUrl" alt="Header logo" />
          </template>
          <div>
            <h2 x-text="denChiefTitle"></h2>
            <p>Den chief instructions</p>
          </div>
        </div>
        <template x-if="watermarkDataUrl">
          <img class="watermark" :src="watermarkDataUrl" alt="Watermark" />
        </template>
        <div class="pdf-content">
          <div class="markdown" x-html="renderSections(denChiefMarkdown)"></div>
        </div>
      </div>
    </section>

  </main>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("../../sw.js");
    }
  </script>
</body>
</html>
